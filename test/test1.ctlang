Feature: Dial    
  In order to make a seamless call transfer to another number
  As an end user
  I want to make an outgoing dial from an already made and current call

Background: Setup
    Given my test setup runs

Scenario: Dial
    Given "NumberB" configured to dial "NumberBR1"
    When I make a call from "NumberA" to "NumberB"
    Then "NumberBR1" should get the incoming call from "NumberB"


Feature: Hangup    
  In order to hangup a call after a certain time in seconds
  As an end user
  I want to have my call automatically off

Background: Setup
    Given my test setup runs

  Scenario: Hangup a call
    And "NumberC" configured to hangup after "3" seconds
    When I make a call from "NumberC" to "NumberD"
    Then "NumberC" should get last call duration greater than or equals to "3"


Feature: number    
  In order to list available numbers from one area code
  As an end user
  I want to list at least one number from this area

  Scenario: List available numbers

    Given my test setup runs    
    When I list all available numbers
    Then I should get to buy 1 from list 

    # error tests - ran out of balance, I get the number




Feature: pause    
  In order to pause a call for a certain time
  As an end user
  I want to call to a Number and pause some seconds and after hangup.

  Background: setup
    Given my test setup runs

  Scenario: Pause a sequence of sentences
    And "NumberB" configured to pause 3 seconds
    And append To "NumberB" config hangup
    When I make a call from "NumberA" to "NumberB"
    Then "NumberA" should get last call duration more than or equals to 3




Feature: ping    
  In order to send data from a current call to a Webhook
  As an end user
  I want to call to a Number and ping a URL.

  Background: setup
    Given my test setup runs

  Scenario: Ping a URL
    And "NumberD" configured to ping URL
    When I make a call from "NumberC" to "NumberD"
    Then should get a ping request on the URL


Feature: play    
  In order to play a tone with frequencies
  As an end user
  I want to set a tone to play after the call is established
  And should be able to record and extract these frequencies

  Background: setup
    Given my test setup runs 
    
  Scenario: Play a tone
    And "NumberD" configured to play tone "5000,10,850"
    And "NumberE" configured to record calls 
    When I make a call from "NumberD" to "NumberE"
    Then "NumberE" should be able to listen to frequencies "850"
  


Feature: play last recording    
  In order to listen the last recording of my calls
  As an end user
  I want to call a number and set to play the last recording.

  Scenario: Play Last Recording

    Given my test setup runs
      And "NumberA" configured to say "This is the last recording"
      And "NumberB" configured to record calls
      When I make a call from "NumberA" to "NumbeB"
      And "NumberB" configured to play last recording
      Then "NumberA" should get transcription "This is the last recording"


Feature: reject    
  In order to reject a call
  As an end user
  I want to try to make a call to a Number and other number rejects.

  Scenario: Call Reject 
    Given my test setup runs
    And "NumberB" configured to reject call
    When I make a call from "NumberA" to "NumberB"
    Then "NumberA" should get call cancel status



Feature: say    
  In order to read text to the Number B (called) using a text-to-speech engine   
  As an end user
  I want that Number A (caller) listen the speech set to be read on Number B.

  Scenario: Say something

    Given my test setup runs 
      And "NumberA" configured to say "what we do in life echoes in eternity" 
      And "NumberB" configured to gather speech 
      When I make a call from "NumberA" to "NumberB" 
      Then "NumberB" should get speech "what we do in life echoes in eternity" 



Feature: sms    
  In order to send an SMS during a call
  As an end user
  I want to make a call and send a text as SMS.

Scenario: Sms Message
    Given my test setup runs
    When "NumberA" sends SMS "what we do in life echoes in eternity" to "NumberB"
    Then "NumberB" should be able to view the SMS "what we do in life echoes in eternity"

#Scenario: Sms Status
#    Given my test setup runs
#    And "NumberA" configured to send sms to "NumberB"
#    When I make a call from "NumberA" to "NumberB" 
#    Then SMS Status should be sent to call Status URL


